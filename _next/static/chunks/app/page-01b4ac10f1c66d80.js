(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{6928:(e,t,n)=>{Promise.resolve().then(n.bind(n,9129))},9129:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>eA});var r=n(5155);let s=function(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=function e(t){var n,r,s="";if("string"==typeof t||"number"==typeof t)s+=t;else if("object"==typeof t)if(Array.isArray(t)){var i=t.length;for(n=0;n<i;n++)t[n]&&(r=e(t[n]))&&(s&&(s+=" "),s+=r)}else for(r in t)t[r]&&(s&&(s+=" "),s+=r);return s}(e))&&(r&&(r+=" "),r+=t);return r};function i(e){let{name:t,headerOptions:n,className:i,children:o}=e;return(0,r.jsxs)("section",{className:s("grid grid-rows-[24px_1fr]",i),children:[(0,r.jsx)(a,{name:t,options:n}),o]})}function a(e){let{name:t,options:n}=e;return(0,r.jsxs)("div",{className:"border-b-1 border-zinc-400 px-2 flex bg-black",children:[(0,r.jsx)("span",{className:"mr-auto font-bold",children:t}),n&&Object.keys(n).map(e=>(0,r.jsx)("input",{type:"button",className:"my-auto mx-2 cursor-pointer hover",value:e,onClick:n[e]},e))]})}function o(){return(0,r.jsx)("div",{className:"p3 overflow-y-scroll select-text",children:"Coming soon222!"})}function c(){return(0,r.jsx)(i,{name:"Docs",className:"row-span-2 w-(--width1) border-r-1 border-zinc-400",children:(0,r.jsx)(o,{})})}function l(e){let{deep:t,arrow:n,name:s,childsElement:i,...a}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex",style:{marginLeft:8*t},children:[n,(0,r.jsx)("div",{className:"cursor-pointer hover",...a,children:s})]}),i]})}var u=n(2115);function d(){let e=(0,u.useState)(!1)[1];return()=>e(e=>!e)}class f{bind(e){if(e){let t=d();this.refresh=()=>{e(),t()}}else this.refresh=d()}get value(){return this.v}set value(e){var t;this.v=e,null==(t=this.refresh)||t.call(this)}constructor(e){this.refresh=()=>{throw Error("Refresh not bind!")},this.v=e}}function h(e){return new f(e)}function m(e,t){var n;let r=(n=new f(e),(0,u.useState)(n)[0]);return r.bind(t),r}function p(e){return JSON.parse(JSON.stringify(e))}function x(e){let{name:t,...n}=e,r=document.createElement(t);for(let e in n)r[e]=n[e];r.click()}function v(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];x({name:"a",href:"data:text;charset=utf-8,".concat(n?encodeURIComponent(t):t),download:e})}function y(e){return S.toUpperCase().includes(e[0])}function j(e){if(0===e.length||!y(e))return!1;for(let t of e)if(!A.includes(t.toLowerCase()))return!1;return!0}function b(e){return!y(e)&&!R.includes(e)}function g(){H.value=!0,L.value=T.pathToMainScene.split(".").slice(1).reduce((e,t)=>e[t],U.value)}function w(){let{position:e,rotation:t,scale:n,...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(r).reduce((e,t)=>({[t]:r[t],...e}),{type:"gameObject",transform:{position:e||{x:0,y:0},rotation:t||{z:0},scale:n||{x:1,y:1}}})}function O(e){return 0===e.length||e[0]===e[0].toUpperCase()?e:"".concat(e[0].toUpperCase()).concat(e.slice(1))}function k(e,t){for(let t in e)delete e[t];for(let n in t)e[n]=t[n]}function N(){x({name:"input",type:"file",accept:".virginengine",onchange:e=>{let{target:t}=e,n=new FileReader;n.onload=e=>{let{target:t}=e,n=JSON.parse(t.result);k(T,n.conf),k(U.value,n.files),g()},n.readAsText(t.files[0])}})}function E(e){return"string"!=typeof e?typeof e:Array.isArray(e)||"["===e[0]?"array":"{"===e[0]?"object":0===e.indexOf("function")?"function":(['"',"'","`"].includes(e[0]),"string")}let S="abcdefghijklmnoprqstuwxyz",C="0123456789",A="".concat(S).concat(C,"_"),R=["type","transform","position","rotation","scale","text","rect","sprite"],T={gameName:"NameOfGame",version:"0.0.0",author:"YourNick",description:"Description",fullScreen:!0,pathToMainScene:"files.Scenes.DefaultScene"},z={type:"folder",Scenes:{type:"folder",MenuScene:{type:"scene",name:"MenuScene"},MainScene:{type:"scene",name:"MainScene"},DefaultScene:{name:"DefaultScene",type:"scene",Parent:w({start:"function() {\n  for(let i = 0; i < 1000; i++)\n    setTimeout(() => this.parent.Child.clone(scene))\n}"}),Child:w({scale:{x:20,y:20},sprite:{color:"#974",imagePath:""},start:"function() {\n  this.position = {x: Math.random() * window.innerWidth, y: Math.random() * window.innerHeight}\n}",update:"function() {\n  const x = this.position.x - 1\n  this.position = {x: x < 0 ? window.innerWidth : x, y: this.position.y}\n}"})}},Assets:{type:"folder",ExampleImage:{type:"image",value:{src:"data:image/png;base64",width:1,height:1}}}},L=h(z.Scenes.MainScene),M=h(null),P=h([]),_=h(null),D=h(""),U=h(z),G=h([]),H=h(!1);function F(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=m(e);return[t?(0,r.jsx)("div",{className:"w-6 h-6 text-center justify-self-center rounded-full cursor-pointer hover",style:{transform:"rotate(".concat(90*!!n.value,"deg)")},onClick:()=>n.value=!n.value,children:">"}):(0,r.jsx)("div",{className:"w-6 h-6"}),n]}function I(){let e=(0,u.useState)(!1)[1];return()=>e(e=>!e)}function B(e){let{sig:t}=e;return(0,r.jsx)("input",{type:"checkbox",className:s("w-5 h-5 my-auto accent-green-600 cursor-pointer",!t.value&&"opacity-20"),checked:t.value,onChange:e=>{let{target:n}=e;return t.value=n.checked}})}function K(e){let{sig:t}=e,n=m(String(t.value));return(0,r.jsx)("input",{type:"text",className:"w-full border-b-1 border-zinc-400 accent-green-600",value:n.value,onChange:e=>{let{target:{value:r}}=e,s=!1;for(let e of r){if(!"".concat(C,"-.").includes(e))return;if("."===e){if(s)return;s=!0}}let i=r.slice(1).includes("-")?-Number("".concat(r.at(0)).concat(r.slice(1).replaceAll("-",""))):Number(r);if(i||0===i){t.value=i,n.value=String(i);return}n.value=r}})}function J(e){let{sig:t}=e;return(0,r.jsx)("input",{type:"text",className:"w-full border-b-1 border-zinc-400 accent-green-600",value:t.value,onChange:e=>{let{target:n}=e;return t.value=n.value}})}function $(e){let{object:t,access:n,type:s}=e,i=m(t[n],()=>t[n]=i.value),a=s||E(i.value),o=function(e,t){switch(e){case"boolean":return(0,r.jsx)(B,{...t});case"number":return(0,r.jsx)(K,{...t});case"string":return(0,r.jsx)(J,{...t});case"array":case"object":case"function":case"enum":return null}}(a,{sig:i});return(0,r.jsxs)("div",{className:"w-full grid grid-cols-[auto_1fr] gap-3",children:[(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)("span",{children:n.slice(1).split("").reduce((e,t)=>"".concat(e).concat(t===t.toUpperCase()?" ":"").concat(t),n[0].toUpperCase())}),(0,r.jsxs)("span",{className:"text-green-500",children:[": ",a]}),(0,r.jsx)("span",{children:"="})]}),o]})}function q(e){let{text:t,remove:n,childs:s,element:i}=e;return(0,r.jsxs)("div",{className:"mt-4 border-b-2 border-zinc-950 pb-2",children:[(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("h2",{className:"mb-2 border-l-4 border-zinc-800 pl-2 text-2xl font-bold",children:t}),n?(0,r.jsx)("input",{type:"button",value:"Remove",className:"mr-4 ml-auto cursor-pointer hover",onClick:n}):null]}),null==s?void 0:s.map(e=>(0,r.jsx)($,{...e},e.access)),i]})}function W(e){var t;let{object:n,access:s}=e,i=(t=E(n[s]),(0,u.useState)(t)[0]);return(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)("div",{children:s}),(0,r.jsxs)("div",{className:"text-green-500",children:[": ",i]}),(0,r.jsx)("div",{children:"="})]}),(0,r.jsx)(Y,{object:n,access:s})]})}function Y(e){var t;let{object:n,access:s}=e,i=(0,u.useRef)(null),a=I();return(0,u.useEffect)(a,[i]),(0,r.jsx)("textarea",{ref:i,className:"w-full resize-none",style:{height:null==i||null==(t=i.current)?void 0:t.scrollHeight},value:n[s],onChange:e=>{let{target:t}=e;n[s]=t.value,a()}})}window.oncontextmenu=e=>e.preventDefault();let Q={boolean:[!1,$],number:[0,$],string:['""',$],array:['[12, 43, "foo"]',W,"[","]"],object:["{}",W,"{","}"],function:["function() {}",W,"function(",") {","}"]};function X(e){let{object:t,value:n,refresh:s}=e;return(0,r.jsx)(et,{text:O(n),onClick:()=>P.value=[e=>{!function(e,t){for(let n in e)if(n===t)return!0;return!1}(t,e)&&(t[e]=Q[n][0],s())},"",!0]})}function Z(e){let{object:t,refresh:n}=e;return(0,r.jsxs)(r.Fragment,{children:[Object.keys(t).filter(e=>b(e)).map(e=>(0,r.jsx)(q,{text:e,element:Q[E(t[e])][1]({object:t,access:e}),remove:()=>{delete t[e],n()}},e)),(0,r.jsx)("div",{className:"mb-4 flex flex-wrap",children:Object.keys(Q).map(e=>(0,r.jsx)(X,{value:e,object:t,refresh:n},e))})]})}function V(e){let{object:t}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(q,{text:"Position",childs:[{object:t.transform.position,access:"x"},{object:t.transform.position,access:"y"}]}),(0,r.jsx)(q,{text:"Rotation",childs:[{object:t.transform.rotation,access:"z"}]}),(0,r.jsx)(q,{text:"Scale",childs:[{object:t.transform.scale,access:"x"},{object:t.transform.scale,access:"y"}]})]})}let ee={text:[[["value"]],{value:""},["rect"],[]],rect:[[["x"],["y"]],{x:0,y:0},[],["text"]],sprite:[[["color"],["imagePath"]],{color:"",imagePath:""},[],[]]};function et(e){let{text:t,onClick:n}=e;return(0,r.jsx)("input",{type:"button",value:"+ ".concat(t),className:"mt-3 mb-6 px-3 py-2 cursor-pointer hover",onClick:n})}function en(e){var t;let{name:n,refresh:s,readOnly:i,...a}=e;return a.object[n]?(0,r.jsx)(q,{text:O(n),childs:(t=a.object,ee[n][0].reduce((e,r)=>[...e,{object:r.slice(0,-1).reduce((e,t)=>e[t],t[n]),access:r.at(-1)}],[])),...a,remove:i?void 0:()=>{for(let e of ee[n][3])delete a.object[e];delete a.object[n],s()}},n):(0,r.jsx)(et,{text:O(n),onClick:()=>{if(!i){for(let e of(a.object[n]=p(ee[n][1]),ee[n][2]))a.object[e]||(a.object[e]=p(ee[e][1]));s()}}})}function er(e){let{name:t,...n}=e,s=I();return n={...n,refresh:s},(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"ml-3 text-xl font-bold",children:t}),(0,r.jsx)(V,{object:n.object}),Object.keys(ee).map(e=>(0,u.createElement)(en,{...n,key:e,name:e})),(0,r.jsx)(Z,{object:n.object,refresh:s})]},JSON.stringify(n))}function es(e){var t;let{old:n,name:s,object:i,deep:a=0}=e,o=0===a,c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce((t,n)=>!R.includes(n)&&y(n)?{[n]:e[n],...t}:t,{})}(i),[u,d]=F(o,(null==(t=Object.keys(c))?void 0:t.length)>0),f=d.value&&Object.entries(c).map(e=>{let[t,n]=e;return(0,r.jsx)(es,{old:i,object:n,name:t,deep:a+1},t)});return l({deep:a,name:s,arrow:u,childsElement:f,onClick:()=>{var e;return!o&&(e={old:n,object:i,name:s},void(M.value=(0,r.jsx)(er,{...e})))},onContextMenu:e=>{let{pageX:t,pageY:r}=e;G.value=[t,r,[()=>{P.value=[e=>{Object.keys(i).includes(e)||(i[e]=w(),d.value=!0,L.refresh())}]},"New Object"],[()=>{P.value=[e=>{s===e||n[e]||(delete n[s],n[e]=i,L.refresh())},s]},"Rename",!o],[()=>{delete n[s],L.refresh()},"Delete",!o]]},onMouseDown:()=>{o||(_.value={from:"hierarchy",old:n,file:i,name:s})},onMouseUp:()=>{let e=_.value;if(e&&e.name!==s&&"gameObject"===e.file.type){for(let t in c)if(t===e.name)return;i[e.name]=e.file,"hierarchy"===e.from&&e.old&&delete e.old[e.name],L.refresh()}}})}function ei(){return L.bind(()=>M.value=null),(0,r.jsx)(es,{object:L.value,old:U.value.Scenes,name:L.value.name,deep:0})}function ea(){return(0,r.jsx)(i,{name:"Hierarchy",className:"w-(--width2) h-(--height1) border-b-1 border-zinc-400",children:(0,r.jsx)("div",{className:"overflow-y-scroll",children:(0,r.jsx)(ei,{})})})}let eo='\n<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="UTF-8"/>\n    <meta name="viewport" content="width=device-width,initial-scale=1.0"/>\n    <meta name="author" content="AUTHOR"/>\n    <meta name="description" content="DESCRIPTION"/>\n    <meta name="keywords" content="GAME_NAME,AUTHOR"/>\n\n    <title>GAME_NAME</title>\n\n    <style>\n      body {\n        background-color:black;\n        margin:0;\n        border:0;\n        user-select:none;\n        width:100vw;\n        height:100vh;\n        overflow:hidden;\n      }\n    </style>\n  </head>\n  <body>\n    <canvas></canvas>\n    <script>\n      SCRIPT\n    <\/script>\n  </body>\n</html>\n'.replaceAll("\n"," ").replaceAll(/\s{2,}/g," ").replaceAll("> ",">").replaceAll(" <","<").replaceAll("; ",";").replaceAll(" {","{").replaceAll("{ ","{").replaceAll(' "','"').replaceAll('" ','"');function ec(){return eo.replaceAll("AUTHOR",T.author).replaceAll("DESCRIPTION",T.description).replaceAll("GAME_NAME",T.gameName).replaceAll("SCRIPT",'class Transform {gameObject;px = 0;py = 0;rz = 0;sx = 1;sy = 1;constructor(props, gameObject) {if (props && gameObject) {this.gameObject = gameObject;const { position, rotation, scale } = props;if (position)this.position = position;if (rotation)this.rotation = rotation;if (scale)this.scale = scale;gameObject.position = this.position;gameObject.rotation = this.rotation;gameObject.scale = this.scale;} else {this.readonly = true;}}get position() {return { x: this.px, y: this.py };}set position({ x, y }) {if (this.readonly)throw alert(`PROGRAMMER, you can\'t chage "readOnly" position`);for (const child of this.gameObject.childs) {child.transform.position = {x: child.transform.px - this.px + x,y: child.transform.py - this.py + y};}this.px = x;this.py = y;}get rotation() {return { z: this.rz };}set rotation({ z }) {if (this.readonly)throw alert(`PROGRAMMER, you can\'t chage "readOnly" rotation`);while (z < 0) {z += 360;}while (z >= 360) {z -= 360;}for (const child of this.gameObject.childs) {let newRot = child.transform.rz - this.rz + z;if (newRot < 0) {newRot += 360;} else if (newRot > 360) {newRot -= 360;}child.transform.rotation = { z: newRot };}this.rz = z;}get scale() {return { x: this.sx, y: this.sy };}set scale({ x, y }) {if (this.readonly)throw alert(`PROGRAMMER, you can\'t chage "readOnly" scale`);for (const child of this.gameObject.childs) {child.transform.scale = {x: child.transform.sx / this.sx * x,y: child.transform.sy / this.sy * y};}this.sx = x;this.sy = y;}get props() {return {position: this.position,rotation: this.rotation,scale: this.scale};}}async function wait(time) {await new Promise((r) => setTimeout(r, time));}function isChildKey(text) {return alphabet.includes(text.at(0));}function deepCopy(data) {if (Array.isArray(data)) {return data.reduce((prev, val) => [...prev, deepCopy(val)], []);}if (typeof data === `object`) {const newObj = {};for (const key in data) {if ([`parent`, `toUpdate`, `toRender`, `gameObject`].includes(key))continue;newObj[key] = deepCopy(data[key]);}return newObj;}return data;}function loadScene({ name, ...newScene }) {scene.load(deepCopy(newScene), name);onresize();}function draw({ text, color, x, y, w, h, ...props }) {ctx.save();for (const key in props) {ctx[key] = props[key];}if (text)ctx.fillText(text, x, y);if (color) {ctx.fillStyle = color;ctx.fillRect(x, y, w, h);}ctx.restore();}function drawBoxMiddle(x, y, w, h, color) {draw({ x: x - w / 2, y: y - h / 2, w, h, color });}function onresize() {ctx.canvas.width = window.innerWidth;ctx.canvas.height = window.innerHeight;}function Sprite(props, gameObject) {if (props.imagePath)return new PathSprite(props, gameObject);return new BoxSprite(props, gameObject);}class BoxSprite {gameObject;color;constructor({ color }, gameObject) {this.gameObject = gameObject;this.color = color;gameObject.toRender.push(this.render.bind(this));}render() {drawBoxMiddle(this.gameObject.position.x, this.gameObject.position.y, this.gameObject.scale.x, this.gameObject.scale.y, this.color);}get props() {return {color: this.color};}}class PathSprite {gameObject;imagePath;constructor({ imagePath }, gameObject) {this.gameObject = gameObject;this.imagePath = imagePath;gameObject.toRender.push(this.render.bind(this));throw Error(`PathSprite, camming soon!`);}render() {}get props() {return {imagePath: this.imagePath};}}var textBaseline = [`top`, `middle`, `bottom`];var textAlign = [`left`, `center`, `right`];class Text {value;rect;transform;textBaseline;textAlign;constructor({ value }, gameObject) {this.transform = gameObject.transform;this.value = value;if (gameObject.rect) {this.rect = gameObject.rect;this.textBaseline = textBaseline[this.rect.x];this.textAlign = textAlign[this.rect.y];}gameObject.toRender.push(this.render.bind(this));}render() {draw({text: this.value,...this.transform.position,fillStyle: `white`,font: `${this.transform.scale.y}px serif`,textBaseline: this.textBaseline,textAlign: this.textAlign});}get props() {return {value: this.value};}}var keywords = [`toUpdate`, `toRender`, `parent`, `position`, `rotation`, `scale`];class GameObject {toUpdate = [];toRender = [];parent;name;start;update;transform;position;rotation;scale;rect;text;sprite;constructor({ parent, transform, rect, text, sprite, start, update, render, ...rest }, name) {this.name = name;this.parent = parent || {};if (parent)this.parent[this.name] = this;this.transform = new Transform(transform, this);if (rect)this.rect = rect;if (text)this.text = new Text(text, this);if (sprite)this.sprite = Sprite(sprite, this);for (const key in rest) {this[key] = isChildKey(key) ? new GameObject({ ...rest[key], parent: this }, key) : typeof rest[key] === `function` ? rest[key].bind(this) : rest[key];}if (update) {this.update = update;this.toUpdate.push(() => this.update.bind(this)());}if (render)this.toRender.push(() => render.bind(this)());if (start) {this.start = start;this.start.bind(this)();}gameObjects.push(this);}get childs() {return Object.keys(this).reduce((prev, key) => isChildKey(key) ? [...prev, this[key]] : prev, []);}get props() {const newObj = {start: this?.start,update: this?.update,transform: this.transform.props,rect: deepCopy(this.rect),sprite: this.sprite?.props,text: this.text?.props};for (const key in this) {if (!(key in newObj) && !keywords.includes(key))newObj[key] = this[key];}return deepCopy(newObj);}clone(parent = this.parent) {const name = this.name;let newName = name;let i = 0;while (parent[newName]) {newName = `${name}${i}`;i++;}new GameObject({ ...this.props, parent }, newName);}destroy() {for (const child of this.childs)child.destroy();const { parent } = this;const parentKey = this.name;for (const key in this)delete this[key];gameObjects.splice(gameObjects.indexOf(this));delete parent[parentKey];}}var ctx = document.body.children[0].getContext(`2d`);var files = `REPLACE_FILES`;var alphabet = `ABCDEFGHIJKLMNOPRQSTUWXYZ`;var events = {};var eventsHover = {};var gameObjects = [];var Log = { updates: 0, frames: 0, framesTemp: 0 };var GameTime = {ms: 1,value: 1,lastTime: 0,set(newTime) {this.value = newTime;this.ms = 1000 / (60 * this.value);this.lastTime = performance.now();}};class Scene extends GameObject {camera = { x: 0, y: 0 };constructor(scene2, name) {super(scene2, name);}load(newScene, name) {this.close();scene = new Scene(newScene, name);}close() {super.destroy();gameObjects.length = 0;for (const key in events)delete events[key];for (const key in eventsHover)delete eventsHover[key];for (const key in this) {if (![`name`, `objects`, `load`, `close`].includes(key))delete this[key];}}}var scene = new Scene({}, ``);async function run() {loadScene(`REPLACE_PATH_TO_MAIN_SCENE`);GameTime.set(1);requestAnimationFrame(render);let timer = performance.now();let updates = 0;let delta = 0;while (true) {const now = performance.now();delta += (now - GameTime.lastTime) / GameTime.ms;if (delta > 60)delta = 60;GameTime.lastTime = now;while (delta >= 1) {update();updates++;delta--;}if (now - timer > 1000) {timer += 1000;Log.updates = updates;Log.frames = Log.framesTemp;updates = 0;Log.framesTemp = 0;}await wait();}}function update() {for (const obj of gameObjects) {for (const f of obj.toUpdate)f();}for (const key in events)delete events[key];}function render() {ctx.fillStyle = `black`;ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);for (const obj of gameObjects) {for (const f of obj.toRender)f();}draw({text: `${gameObjects.length}go, ${Log.updates}ups, ${Log.frames}fps`,x: window.innerWidth - 6,y: 6,fillStyle: `white`,font: `18px serif`,textAlign: `right`,textBaseline: `top`});Log.framesTemp++;requestAnimationFrame(render);}window.addEventListener(`mousedown`, () => eventsHover.click = true);window.addEventListener(`mouseup`, () => delete eventsHover.click);window.addEventListener(`click`, () => events.click = true);window.addEventListener(`keydown`, ({ key }) => events[key] = eventsHover[key] = true);window.addEventListener(`keyup`, ({ key }) => delete eventsHover[key]);window.addEventListener(`contextmenu`, (e) => {e.preventDefault();!document.fullscreenElement ? document.documentElement.requestFullscreen() : document.exitFullscreen();});window.addEventListener(`resize`, onresize);console.log(`Engine:`, !!files);onresize();run();'.replace("`REPLACE_FILES`",function e(t,n,r){return Array.isArray(t)?"".concat(t.reduce((t,n)=>"".concat(t).concat(e(n),","),"[").slice(0,-1),"]"):"object"==typeof t?"".concat(Object.keys(t).reduce((n,r)=>"".concat(n).concat(r,":").concat(e(t[r],r,t.type),","),"{").slice(0,-1),"}"):"gameObject"===r&&b(n)?t:JSON.stringify(t)}(U.value)).replace("`REPLACE_PATH_TO_MAIN_SCENE`",T.pathToMainScene))}function el(){D.value=ec()}function eu(){v("".concat(T.gameName,".virginengine"),JSON.stringify({conf:T,files:U.value}))}function ed(){return(0,r.jsx)(q,{text:"Config",childs:Object.keys(T).filter(e=>"type"!==e).map(e=>({text:e,object:T,access:e}))})}window.addEventListener("keydown",e=>{e.ctrlKey&&"s"===e.key&&(e.preventDefault(),eu())});let ef={Test:el,Save:eu,Build:function(){v("".concat(T.gameName,".html"),ec(),!0)},Load:N,Config:()=>M.value=(0,r.jsx)(ed,{})};function eh(){return M.bind(),M.value}function em(){return(0,r.jsx)(i,{name:"Inspenctor",className:"row-span-2 w-(--width3) border-l-1 border-zinc-400",headerOptions:ef,children:(0,r.jsx)("div",{className:"p-2 overflow-y-scroll",children:(0,r.jsx)(eh,{})})})}function ep(e){let{old:t,file:n,name:s,deep:i=0,path:a="files"}=e,o=0===i;o||(a+=".".concat(s));let c="folder"===n.type,[u,d]=F(o,c),f=d.value&&"scene"!==n.type&&Object.entries(n).map(e=>{let[t,s]=e;return y(t)&&(0,r.jsx)(ep,{old:n,file:s,name:t,deep:i+1,path:a},t)});return l({deep:i,name:s,arrow:u,childsElement:f,onClick:()=>{M.value=(0,r.jsxs)("div",{className:"m-3",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold",children:"File"}),(0,r.jsxs)("div",{children:["Type: ",n.type]}),(0,r.jsxs)("div",{children:["Name: ",s]})]})},onContextMenu:e=>{let{pageX:r,pageY:i}=e,l=(e,t)=>[()=>P.value=[e=>{n[e]={type:t},d.value=!0,U.refresh()}],e,c];G.value=[r,i,l("New file","txt"),l("New folder","folder"),l("New scene","scene"),[()=>P.value=[e=>{s!==e&&(delete t[s],t[e]=n,U.refresh())},s],"Rename",!o],[()=>navigator.clipboard.writeText(a),"Copy path"],[()=>{delete t[s],U.refresh()},"Delete",!o]]},onMouseDown:()=>{o||(_.value={from:"files",old:t,file:n,name:s})},onMouseUp:()=>{if(!c)return;let e=_.value;(null==e?void 0:e.from)!=="files"||e.name===s||n[e.name]||(n[e.name]=e.file,e.old&&delete e.old[e.name],U.refresh())},onDoubleClick:()=>"scene"===n.type&&void(L.value=n)})}let ex=()=>(U.bind(),(0,r.jsx)(ep,{file:U.value,name:"files",deep:0,old:!0}));function ev(){return(0,r.jsx)(i,{name:"Files",className:"w-(--width2) h-(--height2)",children:(0,r.jsx)("div",{className:"overflow-y-scroll",children:(0,r.jsx)(ex,{})})})}function ey(e){return(0,r.jsx)("input",{className:"mx-auto my-6 border-4 border-zinc-400 px-16 py-4 text-5xl cursor-pointer hover",type:"button",...e})}function ej(){return H.bind(),H.value?null:(0,r.jsxs)("div",{className:"absolute z-1 w-screen h-screen flex flex-col justify-center bg-[#000a]",children:[(0,r.jsx)(ey,{value:"Load Project",onClick:()=>N()}),(0,r.jsx)(ey,{value:"New project",onClick:g})]})}function eb(){let e=(0,u.useRef)(null);return G.bind(),(0,u.useEffect)(()=>{function t(t){let{target:n}=t;e.current&&!e.current.contains(n)&&(G.value=[])}return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[e]),G.value.length>2?(0,r.jsx)("div",{ref:e,className:"absolute z-1 border-4 border-zinc-800 px-2 py-0.5 bg-black",style:{inset:"".concat(G.value[1],"px auto auto ").concat(G.value[0],"px")},children:G.value.slice(2).map(e=>{let[t,n,s=!0]=e;return s?(0,r.jsx)("div",{className:"cursor-pointer hover",onClick:()=>{t(),G.value=[]},children:n},n):null})}):null}function eg(){let e=(0,u.useRef)(null),t=function(e){P.bind();let[t,n="",r=!1]=P.value,s=()=>{t&&j(n)&&t(r?"".concat(n[0].toLowerCase()).concat(n.slice(1)):n),P.value=[]};return(0,u.useEffect)(()=>{if(e)return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t);function t(t){let{target:n}=t;e.current&&!e.current.contains(n)&&s()}}),t?{value:n,onChange:e=>{let{target:n}=e,s=O(n.value);j(s)&&(P.value=[t,s,r])},onKeyDown:e=>{let{key:t}=e;return"Enter"===t&&s()}}:null}(e);return t&&(0,r.jsx)("input",{ref:e,type:"text",className:"absolute z-1 text-4xl translate-x-[calc(50vw-50%)] translate-y-[calc(50vh-50%)]",...t,autoFocus:!0})}let ew=h(void 0);function eO(e){let{clientX:t,clientY:n,buttons:r}=e;1===r&&(console.log("Render"),ew.value={left:t+3,top:n+3})}function ek(){_.value=null,ew.value=void 0}function eN(){var e;return _.bind(),ew.bind(),(0,u.useEffect)(()=>{if(_.value)return window.addEventListener("mousemove",eO),window.addEventListener("mouseup",ek),()=>{window.removeEventListener("mousemove",eO),window.removeEventListener("mouseup",ek)}}),ew.value?(0,r.jsx)("div",{className:"absolute z-1 bg-[#000a]",style:ew.value,children:null==(e=_.value)?void 0:e.name}):null}let eE={"16/9":"aspect-[16/9]","1/1":"aspect-square","9/16":"aspect-[9/16]"},eS=h(eE["16/9"]);function eC(){if(D.bind(console.clear),eS.bind(),D.value)return(0,r.jsx)(i,{name:"Test",className:"absolute z-1 w-screen h-screen",headerOptions:{...Object.entries(eE).reduce((e,t)=>{let[n,r]=t;return{...e,[n]:()=>eS.value=r}},{}),Restart:()=>{D.value=".",setTimeout(el)},Exit:()=>D.value=""},children:(0,r.jsx)("div",{className:"flex justify-center bg-zinc-950",children:(0,r.jsx)("iframe",{title:"scene",className:s("box-content border-x-1 border-zinc-400",eS.value),srcDoc:D.value})})})}function eA(){if(function(){let[e,t]=(0,u.useState)(!1);return(0,u.useEffect)(()=>t(!0),[e]),e}())return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("header",{children:[(0,r.jsx)(ej,{}),(0,r.jsx)(eb,{}),(0,r.jsx)(eg,{}),(0,r.jsx)(eN,{}),(0,r.jsx)(eC,{})]}),(0,r.jsxs)("main",{className:"w-screen h-screen grid grid-cols-[30fr_30fr_40fr] grid-rows-[55fr_45fr]",children:[(0,r.jsx)(c,{}),(0,r.jsx)(ea,{}),(0,r.jsx)(em,{}),(0,r.jsx)(ev,{})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(6928)),_N_E=e.O()}]);