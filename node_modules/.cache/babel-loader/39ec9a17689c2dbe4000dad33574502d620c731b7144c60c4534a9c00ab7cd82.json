{"ast":null,"code":"import{useEffect,useRef,useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";export const ContextMenu=()=>{const[{x,y,arr},setContextMenu]=useState({});const ref=useRef();useEffect(()=>{window.editor.setContextMenu=setContextMenu;const handler=_ref=>{let{target}=_ref;if(ref.current){if(!ref.current.contains(target)){setContextMenu({});}}};document.addEventListener(`mousedown`,handler);return()=>{document.removeEventListener(`mousedown`,handler);};},[]);return arr&&arr.length?/*#__PURE__*/_jsx(\"div\",{ref:ref,onClick:()=>{window.showContextMenu=true;},style:{position:`absolute`,zIndex:1,left:x,top:y,width:200,backgroundColor:`#333`,border:`3px solid #333`},children:arr.map(_ref2=>{let[text,fn,show=true]=_ref2;if(!show){return null;}return/*#__PURE__*/_jsx(\"div\",{onClick:()=>{fn();setContextMenu({});},style:{cursor:`pointer`,\"&:hover\":{backgroundColor:`#333`}},children:text},text);})}):/*#__PURE__*/_jsx(\"div\",{});};","map":{"version":3,"names":["useEffect","useRef","useState","jsx","_jsx","ContextMenu","x","y","arr","setContextMenu","ref","window","editor","handler","_ref","target","current","contains","document","addEventListener","removeEventListener","length","onClick","showContextMenu","style","position","zIndex","left","top","width","backgroundColor","border","children","map","_ref2","text","fn","show","cursor"],"sources":["/workspaces/deathengine/src/editor/ui/ContextMenu.jsx"],"sourcesContent":["import { useEffect, useRef, useState } from \"react\"\n\nexport const ContextMenu = () => {\n  const [{ x, y, arr }, setContextMenu] = useState({})\n  const ref = useRef()\n\n  useEffect(() => {\n    window.editor.setContextMenu = setContextMenu\n\n    const handler = ({ target }) => {\n      if(ref.current) {\n        if(!ref.current.contains(target)) {\n          setContextMenu({})\n        }\n      }\n    }\n\n    document.addEventListener(`mousedown`, handler)\n\n    return () => {\n      document.removeEventListener(`mousedown`, handler)\n    }\n  }, [])\n\n  return arr && arr.length ? <div\n    ref={ref}\n    onClick={() => {\n      window.showContextMenu = true\n    }}\n    style={{\n      position: `absolute`,\n      zIndex: 1,\n      left: x,\n      top: y,\n      width: 200,\n      backgroundColor: `#333`,\n      border: `3px solid #333`\n    }}\n  >\n    {arr.map(([text, fn, show = true]) => {\n      if(!show) {\n        return null\n      }\n\n      return <div\n        key={text}\n        onClick={() => {\n          fn()\n          setContextMenu({})\n        }}\n        style={{\n          cursor: `pointer`,\n          \"&:hover\": {\n            backgroundColor: `#333`\n          }\n        }}\n      >\n        {text}\n      </div>\n    })}\n  </div> : <div></div>\n}"],"mappings":"AAAA,OAASA,SAAS,CAAEC,MAAM,CAAEC,QAAQ,KAAQ,OAAO,QAAAC,GAAA,IAAAC,IAAA,yBAEnD,MAAO,MAAM,CAAAC,WAAW,CAAGA,CAAA,GAAM,CAC/B,KAAM,CAAC,CAAEC,CAAC,CAAEC,CAAC,CAAEC,GAAI,CAAC,CAAEC,cAAc,CAAC,CAAGP,QAAQ,CAAC,CAAC,CAAC,CAAC,CACpD,KAAM,CAAAQ,GAAG,CAAGT,MAAM,CAAC,CAAC,CAEpBD,SAAS,CAAC,IAAM,CACdW,MAAM,CAACC,MAAM,CAACH,cAAc,CAAGA,cAAc,CAE7C,KAAM,CAAAI,OAAO,CAAGC,IAAA,EAAgB,IAAf,CAAEC,MAAO,CAAC,CAAAD,IAAA,CACzB,GAAGJ,GAAG,CAACM,OAAO,CAAE,CACd,GAAG,CAACN,GAAG,CAACM,OAAO,CAACC,QAAQ,CAACF,MAAM,CAAC,CAAE,CAChCN,cAAc,CAAC,CAAC,CAAC,CAAC,CACpB,CACF,CACF,CAAC,CAEDS,QAAQ,CAACC,gBAAgB,CAAC,WAAW,CAAEN,OAAO,CAAC,CAE/C,MAAO,IAAM,CACXK,QAAQ,CAACE,mBAAmB,CAAC,WAAW,CAAEP,OAAO,CAAC,CACpD,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAEN,MAAO,CAAAL,GAAG,EAAIA,GAAG,CAACa,MAAM,cAAGjB,IAAA,QACzBM,GAAG,CAAEA,GAAI,CACTY,OAAO,CAAEA,CAAA,GAAM,CACbX,MAAM,CAACY,eAAe,CAAG,IAAI,CAC/B,CAAE,CACFC,KAAK,CAAE,CACLC,QAAQ,CAAE,UAAU,CACpBC,MAAM,CAAE,CAAC,CACTC,IAAI,CAAErB,CAAC,CACPsB,GAAG,CAAErB,CAAC,CACNsB,KAAK,CAAE,GAAG,CACVC,eAAe,CAAE,MAAM,CACvBC,MAAM,CAAE,gBACV,CAAE,CAAAC,QAAA,CAEDxB,GAAG,CAACyB,GAAG,CAACC,KAAA,EAA6B,IAA5B,CAACC,IAAI,CAAEC,EAAE,CAAEC,IAAI,CAAG,IAAI,CAAC,CAAAH,KAAA,CAC/B,GAAG,CAACG,IAAI,CAAE,CACR,MAAO,KAAI,CACb,CAEA,mBAAOjC,IAAA,QAELkB,OAAO,CAAEA,CAAA,GAAM,CACbc,EAAE,CAAC,CAAC,CACJ3B,cAAc,CAAC,CAAC,CAAC,CAAC,CACpB,CAAE,CACFe,KAAK,CAAE,CACLc,MAAM,CAAE,SAAS,CACjB,SAAS,CAAE,CACTR,eAAe,CAAE,MACnB,CACF,CAAE,CAAAE,QAAA,CAEDG,IAAI,EAZAA,IAaF,CAAC,CACR,CAAC,CAAC,CACC,CAAC,cAAG/B,IAAA,SAAU,CAAC,CACtB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}